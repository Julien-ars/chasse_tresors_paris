<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu de Memory – Qui repose ici ?</title>
  <link rel="stylesheet" href="style_memory.css">
</head>
<body>
  <h2> Jeu de Memory : Qui repose ici ?</h2>
  <p>Sélectionne les paires des défunts qui occupent le cimetière Montparnasse.</p>
  <div id="memory-board" class="memory-grid"></div>

  <script>
    const figures = [
      { name: "Sartre", dates: "1905–1980", img: "sartre.jpg" },
      { name: "Beauvoir", dates: "1908–1986", img: "beauvoir.jpg" },
      { name: "Baudelaire", dates: "1821–1867", img: "baudelaire.jpg" },
      { name: "Ionesco", dates: "1909–1994", img: "ionesco.jpg" },
      { name: "Larousse", dates: "1817–1875", img: "larousse.jpg" }
    ];

    const board = document.getElementById("memory-board");
    let flippedCards = [];
    let matchedIndices = [];

    const cards = [...figures, ...figures].sort(() => 0.5 - Math.random());

    cards.forEach((figure, index) => {
      const card = document.createElement("div");
      card.className = "memory-card";
      card.dataset.index = index;

      card.innerHTML = `
        <div class="card-inner">
          <div class="card-front">❓</div>
          <div class="card-back">
            <img src="images/${figure.img}" alt="${figure.name}">
            <p>${figure.name}<br><small>${figure.dates}</small></p>
          </div>
        </div>
      `;

      card.addEventListener("click", () => {
        if (
          card.classList.contains("flipped") ||
          flippedCards.length >= 2 ||
          matchedIndices.includes(index)
        ) return;

        card.classList.add("flipped");
        flippedCards.push({ card, figure, index });

        if (flippedCards.length === 2) {
          const [first, second] = flippedCards;
          if (first.figure.name === second.figure.name && first.index !== second.index) {
            matchedIndices.push(first.index, second.index);
            flippedCards = [];
          } else {
            setTimeout(() => {
              first.card.classList.remove("flipped");
              second.card.classList.remove("flipped");
              flippedCards = [];
            }, 1000);
          }
        }
      });

      board.appendChild(card);
    });
  </script>
</body>
</html>
