<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=2.0">
  <title>Mots Mêlés - Cimetière Montparnasse</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #121213;
      color: #f6f7f8;
      text-align: center;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(15, 35px);
      gap: 2px;
      justify-content: center;
      margin: 20px auto;
    }
    .cell {
      width: 35px;
      height: 35px;
      background-color: #1e1e20;
      color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1em;
      border: 1px solid #3a3a3c;
      cursor: pointer;
      user-select: none;
    }
    .cell.marked {
      background-color: #444;
      color: #aaa;
      text-decoration: line-through;
    }
    .hidden {
      visibility: hidden;
    }
    ul {
      list-style: none;
      padding: 0;
      margin-top: 20px;
    }
    li {
      cursor: pointer;
      margin: 5px;
      padding: 4px 8px;
      background-color: #1e1e20;
      display: inline-block;
      border-radius: 5px;
    }
    li.found {
      text-decoration: line-through;
      color: #888;
      background-color: #333;
    }

    .i {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin: 40px auto;
        padding: 0 20px;
    }
  

  button {
      padding: 10px 16px;
      background-color: #565656;
      color: white;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      font-size: 1em;
      text-align: center;
      white-space: nowrap;
    }

    @media screen and (max-width: 600px) {
  h2 {
    font-size: 1.8em;
  }

  p {
    font-size: 1em;
  }

  .grid {
    grid-template-columns: repeat(15, 22px); /* taille réduite mais lisible */
  }

  .cell {
    width: 22px;
    height: 22px;
    font-size: 0.8em;
  }
}
.cell.secret {
  background-color: rgb(149, 24, 24);
  color: white;
  font-weight: bold;
  text-shadow: none;
}
.cell.secret-red {
  background-color: rgb(129, 19, 19) !important;
  color: white !important;
}


  </style>
</head>
<body>
  <h2> Mots Mêlés </h2>
  <p>Trouve tous les mots ci-dessous dans la grille. Un message s'y cache peut-être. <br> Attention, il y a deux mots en diagonale.</p>

  <div class="grid" id="grid">
<div class='cell' data-row='0' data-col='0'>H</div>
<div class='cell' data-row='0' data-col='1'>P</div>
<div class='cell' data-row='0' data-col='2'>E</div>
<div class='cell' data-row='0' data-col='3'>N</div>
<div class='cell' data-row='0' data-col='4'>O</div>
<div class='cell' data-row='0' data-col='5'>M</div>
<div class='cell' data-row='0' data-col='6'>B</div>
<div class='cell' data-row='0' data-col='7'>R</div>
<div class='cell' data-row='0' data-col='8'>E</div>
<div class='cell' data-row='0' data-col='9'>X</div>
<div class='cell' data-row='0' data-col='10'>N</div>
<div class='cell' data-row='0' data-col='11'>G</div>
<div class='cell' data-row='0' data-col='12'>F</div>
<div class='cell' data-row='0' data-col='13'>V</div>
<div class='cell' data-row='0' data-col='14'>N</div>
<div class='cell' data-row='1' data-col='0'>V</div>
<div class='cell' data-row='1' data-col='1'>S</div>
<div class='cell' data-row='1' data-col='2'>V</div>
<div class='cell' data-row='1' data-col='3'>R</div>
<div class='cell' data-row='1' data-col='4'>M</div>
<div class='cell' data-row='1' data-col='5'>G</div>
<div class='cell' data-row='1' data-col='6'>D</div>
<div class='cell' data-row='1' data-col='7'>L</div>
<div class='cell' data-row='1' data-col='8'>E</div>
<div class='cell' data-row='1' data-col='9'>Q</div>
<div class='cell' data-row='1' data-col='10'>W</div>
<div class='cell' data-row='1' data-col='11'>P</div>
<div class='cell' data-row='1' data-col='12'>D</div>
<div class='cell' data-row='1' data-col='13'>L</div>
<div class='cell' data-row='1' data-col='14'>J</div>
<div class='cell' data-row='2' data-col='0'>U</div>
<div class='cell' data-row='2' data-col='1'>A</div>
<div class='cell' data-row='2' data-col='2'>U</div>
<div class='cell' data-row='2' data-col='3'>I</div>
<div class='cell' data-row='2' data-col='4'>O</div>
<div class='cell' data-row='2' data-col='5'>S</div>
<div class='cell' data-row='2' data-col='6'>C</div>
<div class='cell' data-row='2' data-col='7'>I</div>
<div class='cell' data-row='2' data-col='8'>M</div>
<div class='cell' data-row='2' data-col='9'>E</div>
<div class='cell' data-row='2' data-col='10'>T</div>
<div class='cell' data-row='2' data-col='11'>I</div>
<div class='cell' data-row='2' data-col='12'>E</div>
<div class='cell' data-row='2' data-col='13'>R</div>
<div class='cell' data-row='2' data-col='14'>E</div>
<div class='cell' data-row='3' data-col='0'>I</div>
<div class='cell' data-row='3' data-col='1'>E</div>
<div class='cell' data-row='3' data-col='2'>M</div>
<div class='cell' data-row='3' data-col='3'>E</div>
<div class='cell' data-row='3' data-col='4'>T</div>
<div class='cell' data-row='3' data-col='5'>V</div>
<div class='cell' data-row='3' data-col='6'>L</div>
<div class='cell' data-row='3' data-col='7'>P</div>
<div class='cell' data-row='3' data-col='8'>Z</div>
<div class='cell' data-row='3' data-col='9'>P</div>
<div class='cell' data-row='3' data-col='10'>T</div>
<div class='cell' data-row='3' data-col='11'>F</div>
<div class='cell' data-row='3' data-col='12'>C</div>
<div class='cell' data-row='3' data-col='13'>I</div>
<div class='cell' data-row='3' data-col='14'>I</div>
<div class='cell' data-row='4' data-col='0'>P</div>
<div class='cell' data-row='4' data-col='1'>P</div>
<div class='cell' data-row='4' data-col='2'>U</div>
<div class='cell' data-row='4' data-col='3'>O</div>
<div class='cell' data-row='4' data-col='4'>T</div>
<div class='cell' data-row='4' data-col='5'>E</div>
<div class='cell' data-row='4' data-col='6'>O</div>
<div class='cell' data-row='4' data-col='7'>H</div>
<div class='cell' data-row='4' data-col='8'>J</div>
<div class='cell' data-row='4' data-col='9'>C</div>
<div class='cell' data-row='4' data-col='10'>G</div>
<div class='cell' data-row='4' data-col='11'>P</div>
<div class='cell' data-row='4' data-col='12'>V</div>
<div class='cell' data-row='4' data-col='13'>M</div>
<div class='cell' data-row='4' data-col='14'>S</div>
<div class='cell' data-row='5' data-col='0'>E</div>
<div class='cell' data-row='5' data-col='1'>U</div>
<div class='cell' data-row='5' data-col='2'>Q</div>
<div class='cell' data-row='5' data-col='3'>Y</div>
<div class='cell' data-row='5' data-col='4'>N</div>
<div class='cell' data-row='5' data-col='5'>T</div>
<div class='cell' data-row='5' data-col='6'>R</div>
<div class='cell' data-row='5' data-col='7'>A</div>
<div class='cell' data-row='5' data-col='8'>N</div>
<div class='cell' data-row='5' data-col='9'>R</div>
<div class='cell' data-row='5' data-col='10'>O</div>
<div class='cell' data-row='5' data-col='11'>N</div>
<div class='cell' data-row='5' data-col='12'>U</div>
<div class='cell' data-row='5' data-col='13'>I</div>
<div class='cell' data-row='5' data-col='14'>T</div>
<div class='cell' data-row='6' data-col='0'>N</div>
<div class='cell' data-row='6' data-col='1'>G</div>
<div class='cell' data-row='6' data-col='2'>F</div>
<div class='cell' data-row='6' data-col='3'>F</div>
<div class='cell' data-row='6' data-col='4'>A</div>
<div class='cell' data-row='6' data-col='5'>T</div>
<div class='cell' data-row='6' data-col='6'>K</div>
<div class='cell' data-row='6' data-col='7'>R</div>
<div class='cell' data-row='6' data-col='8'>G</div>
<div class='cell' data-row='6' data-col='9'>I</div>
<div class='cell' data-row='6' data-col='10'>T</div>
<div class='cell' data-row='6' data-col='11'>L</div>
<div class='cell' data-row='6' data-col='12'>S</div>
<div class='cell' data-row='6' data-col='13'>T</div>
<div class='cell' data-row='6' data-col='14'>F</div>
<div class='cell' data-row='7' data-col='0'>L</div>
<div class='cell' data-row='7' data-col='1'>O</div>
<div class='cell' data-row='7' data-col='2'>X</div>
<div class='cell' data-row='7' data-col='3'>A</div>
<div class='cell' data-row='7' data-col='4'>R</div>
<div class='cell' data-row='7' data-col='5'>F</div>
<div class='cell' data-row='7' data-col='6'>P</div>
<div class='cell' data-row='7' data-col='7'>T</div>
<div class='cell' data-row='7' data-col='8'>E</div>
<div class='cell' data-row='7' data-col='9'>C</div>
<div class='cell' data-row='7' data-col='10'>B</div>
<div class='cell' data-row='7' data-col='11'>X</div>
<div class='cell' data-row='7' data-col='12'>P</div>
<div class='cell' data-row='7' data-col='13'>M</div>
<div class='cell' data-row='7' data-col='14'>D</div>
<div class='cell' data-row='8' data-col='0'>J</div>
<div class='cell' data-row='8' data-col='1'>T</div>
<div class='cell' data-row='8' data-col='2'>J</div>
<div class='cell' data-row='8' data-col='3'>N</div>
<div class='cell' data-row='8' data-col='4'>N</div>
<div class='cell' data-row='8' data-col='5'>R</div>
<div class='cell' data-row='8' data-col='6'>T</div>
<div class='cell' data-row='8' data-col='7'>A</div>
<div class='cell' data-row='8' data-col='8'>M</div>
<div class='cell' data-row='8' data-col='9'>U</div>
<div class='cell' data-row='8' data-col='10'>R</div>
<div class='cell' data-row='8' data-col='11'>E</div>
<div class='cell' data-row='8' data-col='12'>I</div>
<div class='cell' data-row='8' data-col='13'>O</div>
<div class='cell' data-row='8' data-col='14'>V</div>
<div class='cell' data-row='9' data-col='0'>K</div>
<div class='cell' data-row='9' data-col='1'>H</div>
<div class='cell' data-row='9' data-col='2'>P</div>
<div class='cell' data-row='9' data-col='3'>T</div>
<div class='cell' data-row='9' data-col='4'>A</div>
<div class='cell' data-row='9' data-col='5'>V</div>
<div class='cell' data-row='9' data-col='6'>L</div>
<div class='cell' data-row='9' data-col='7'>M</div>
<div class='cell' data-row='9' data-col='8'>R</div>
<div class='cell' data-row='9' data-col='9'>C</div>
<div class='cell' data-row='9' data-col='10'>R</div>
<div class='cell' data-row='9' data-col='11'>X</div>
<div class='cell' data-row='9' data-col='12'>M</div>
<div class='cell' data-row='9' data-col='13'>N</div>
<div class='cell' data-row='9' data-col='14'>N</div>
<div class='cell' data-row='10' data-col='0'>S</div>
<div class='cell' data-row='10' data-col='1'>I</div>
<div class='cell' data-row='10' data-col='2'>Q</div>
<div class='cell' data-row='10' data-col='3'>O</div>
<div class='cell' data-row='10' data-col='4'>S</div>
<div class='cell' data-row='10' data-col='5'>G</div>
<div class='cell' data-row='10' data-col='6'>H</div>
<div class='cell' data-row='10' data-col='7'>P</div>
<div class='cell' data-row='10' data-col='8'>P</div>
<div class='cell' data-row='10' data-col='9'>N</div>
<div class='cell' data-row='10' data-col='10'>O</div>
<div class='cell' data-row='10' data-col='11'>M</div>
<div class='cell' data-row='10' data-col='12'>B</div>
<div class='cell' data-row='10' data-col='13'>S</div>
<div class='cell' data-row='10' data-col='14'>R</div>
<div class='cell' data-row='11' data-col='0'>M</div>
<div class='cell' data-row='11' data-col='1'>Q</div>
<div class='cell' data-row='11' data-col='2'>H</div>
<div class='cell' data-row='11' data-col='3'>M</div>
<div class='cell' data-row='11' data-col='4'>O</div>
<div class='cell' data-row='11' data-col='5'>R</div>
<div class='cell' data-row='11' data-col='6'>T</div>
<div class='cell' data-row='11' data-col='7'>X</div>
<div class='cell' data-row='11' data-col='8'>J</div>
<div class='cell' data-row='11' data-col='9'>O</div>
<div class='cell' data-row='11' data-col='10'>A</div>
<div class='cell' data-row='11' data-col='11'>H</div>
<div class='cell' data-row='11' data-col='12'>R</div>
<div class='cell' data-row='11' data-col='13'>T</div>
<div class='cell' data-row='11' data-col='14'>S</div>
<div class='cell' data-row='12' data-col='0'>M</div>
<div class='cell' data-row='12' data-col='1'>U</div>
<div class='cell' data-row='12' data-col='2'>W</div>
<div class='cell' data-row='12' data-col='3'>E</div>
<div class='cell' data-row='12' data-col='4'>S</div>
<div class='cell' data-row='12' data-col='5'>K</div>
<div class='cell' data-row='12' data-col='6'>M</div>
<div class='cell' data-row='12' data-col='7'>Y</div>
<div class='cell' data-row='12' data-col='8'>S</div>
<div class='cell' data-row='12' data-col='9'>T</div>
<div class='cell' data-row='12' data-col='10'>E</div>
<div class='cell' data-row='12' data-col='11'>S</div>
<div class='cell' data-row='12' data-col='12'>A</div>
<div class='cell' data-row='12' data-col='13'>R</div>
<div class='cell' data-row='12' data-col='14'>W</div>
<div class='cell' data-row='13' data-col='0'>R</div>
<div class='cell' data-row='13' data-col='1'>E</div>
<div class='cell' data-row='13' data-col='2'>P</div>
<div class='cell' data-row='13' data-col='3'>O</div>
<div class='cell' data-row='13' data-col='4'>V</div>
<div class='cell' data-row='13' data-col='5'>A</div>
<div class='cell' data-row='13' data-col='6'>M</div>
<div class='cell' data-row='13' data-col='7'>P</div>
<div class='cell' data-row='13' data-col='8'>I</div>
<div class='cell' data-row='13' data-col='9'>R</div>
<div class='cell' data-row='13' data-col='10'>E</div>
<div class='cell' data-row='13' data-col='11'>M</div>
<div class='cell' data-row='13' data-col='12'>S</div>
<div class='cell' data-row='13' data-col='13'>E</div>
<div class='cell' data-row='13' data-col='14'>T</div>
<div class='cell' data-row='14' data-col='0'>H</div>
<div class='cell' data-row='14' data-col='1'>Z</div>
<div class='cell' data-row='14' data-col='2'>T</div>
<div class='cell' data-row='14' data-col='3'>P</div>
<div class='cell' data-row='14' data-col='4'>A</div>
<div class='cell' data-row='14' data-col='5'>R</div>
<div class='cell' data-row='14' data-col='6'>I</div>
<div class='cell' data-row='14' data-col='7'>S</div>
<div class='cell' data-row='14' data-col='8'>E</div>
<div class='cell' data-row='14' data-col='9'>Z</div>
<div class='cell' data-row='14' data-col='10'>F</div>
<div class='cell' data-row='14' data-col='11'>K</div>
<div class='cell' data-row='14' data-col='12'>H</div>
<div class='cell' data-row='14' data-col='13'>E</div>
<div class='cell' data-row='14' data-col='14'>L</div>
</div><ul id='word-list'>
<li>PARIS</li>
<li>PEUR</li>
<li>PENOMBRE</li>
<li>VAMPIRE</li>
<li>FANTOME</li> <br>
<li>GOTHIQUE</li>
<li>MORT</li>
<li>MONSTRE</li>
<li>NUIT</li>
<li>TERREUR</li>

</ul>

<button onclick="revealSecrets()" style="margin-top:20px;padding:8px 15px;font-size:1em;cursor:pointer;">Solution</button> <br>
<p id="secret-message" style="margin-top: 30px; font-size: 1.3em; display: none;">Les mots cachés étaient : <strong>CIMETIÈRE</strong> et <strong>MONTPARNASSE</strong> ! <br>Rendez vous au cimetière de Montparnasse !</p>
<button id="next-button" style="margin-top:20px;padding:10px 20px;font-size:1em;cursor:pointer;display:none;" onclick="location.href='PG2Etombes.html'">Continuer</button> <br>

<script>
const words = ['PARIS', 'PEUR', 'PENOMBRE', 'FANTOME', 'GOTHIQUE', 'MORT', 'VAMPIRE', 'NUIT', 'MONSTRE', 'TERREUR'];
const foundWords = new Set();
const listItems = document.querySelectorAll("#word-list li");
const gridCells = document.querySelectorAll(".cell");

// Gestion du clic sur les lettres
gridCells.forEach(cell => {
  cell.addEventListener("click", () => {
    cell.classList.toggle("marked");
  });
});

function checkCompletion() {
  if (foundWords.size === words.length) {
    const grid = Array.from(document.querySelectorAll(".cell")).map(cell => ({
      row: parseInt(cell.dataset.row),
      col: parseInt(cell.dataset.col),
      letter: cell.textContent,
      el: cell
    }));

    const keepPositions = new Set();
    const redPositions = new Set();

    function markWordPositions(word, targetSet) {
      const directions = [
        { dr: 0, dc: 1 },
        { dr: 1, dc: 0 },
        { dr: 1, dc: 1 },
        { dr: -1, dc: 1 },
        { dr: 1, dc: -1 },
        { dr: -1, dc: -1 }
      ];

      for (const { dr, dc } of directions) {
        for (let r = 0; r < 15; r++) {
          for (let c = 0; c < 15; c++) {
            let match = true;
            for (let i = 0; i < word.length; i++) {
              const rr = r + dr * i;
              const cc = c + dc * i;
              if (rr < 0 || rr >= 15 || cc < 0 || cc >= 15) {
                match = false;
                break;
              }
              const letter = grid.find(cell => cell.row === rr && cell.col === cc).letter;
              if (letter !== word[i]) {
                match = false;
                break;
              }
            }
            if (match) {
              for (let i = 0; i < word.length; i++) {
                const rr = r + dr * i;
                const cc = c + dc * i;
                targetSet.add(`${rr}-${cc}`);
                keepPositions.add(`${rr}-${cc}`);
              }
              return;
            }
          }
        }
      }
    }

    // Marquer les mots spéciaux en rouge
    markWordPositions("CIMETIERE", redPositions);
    markWordPositions("MONTPARNASSE", redPositions);

    // Marquer tous les mots normaux
    words.forEach(word => markWordPositions(word, keepPositions));

    // Appliquer les styles aux cases
    grid.forEach(cell => {
      const key = `${cell.row}-${cell.col}`;
      if (redPositions.has(key)) {
        cell.el.classList.add("secret-red");
      } else if (keepPositions.has(key)) {
        cell.el.classList.add("marked");
      } else {
        cell.el.classList.add("hidden");
      }
    });

    document.getElementById("secret-message").style.display = "block";
    document.getElementById("next-button").style.display = "inline-block";
  }
}


function revealSecrets() {
  const grid = document.querySelectorAll(".cell");
  const gridData = Array.from(grid).map(cell => ({
    row: parseInt(cell.dataset.row),
    col: parseInt(cell.dataset.col),
    letter: cell.textContent,
    el: cell
  }));

  const keepPositions = new Set();
  const redPositions = new Set();

  function markWordPositions(word, targetSet) {
    const directions = [
      { dr: 0, dc: 1 },
      { dr: 1, dc: 0 },
      { dr: 1, dc: 1 },
      { dr: -1, dc: 1 },
      { dr: 1, dc: -1 },
      { dr: -1, dc: -1 }
    ];

    for (const { dr, dc } of directions) {
      for (let r = 0; r < 15; r++) {
        for (let c = 0; c < 15; c++) {
          let match = true;
          for (let i = 0; i < word.length; i++) {
            const rr = r + dr * i;
            const cc = c + dc * i;
            if (rr < 0 || rr >= 15 || cc < 0 || cc >= 15) {
              match = false;
              break;
            }
            const letter = gridData.find(cell => cell.row === rr && cell.col === cc).letter;
            if (letter !== word[i]) {
              match = false;
              break;
            }
          }
          if (match) {
            for (let i = 0; i < word.length; i++) {
              const rr = r + dr * i;
              const cc = c + dc * i;
              targetSet.add(`${rr}-${cc}`);
              keepPositions.add(`${rr}-${cc}`);
            }
            return;
          }
        }
      }
    }
  }

  // Marquer en rouge ces deux mots
  markWordPositions("CIMETIERE", redPositions);
  markWordPositions("MONTPARNASSE", redPositions);

  // Marquer les autres mots normalement
  words.forEach(word => markWordPositions(word, keepPositions));

  // Appliquer les classes
  gridData.forEach(cell => {
    const key = `${cell.row}-${cell.col}`;
    if (redPositions.has(key)) {
      cell.el.classList.add("secret-red");
    } else if (keepPositions.has(key)) {
      cell.el.classList.add("marked");
    } else {
      cell.el.classList.add("hidden");
    }
  });

  document.getElementById("secret-message").style.display = "block";
  document.getElementById("next-button").style.display = "inline-block";
}


function checkMarkedWords() {
  const gridMatrix = Array.from({ length: 15 }, () => Array(15).fill(""));
  document.querySelectorAll(".cell").forEach(cell => {
    const r = parseInt(cell.dataset.row);
    const c = parseInt(cell.dataset.col);
    gridMatrix[r][c] = cell.classList.contains("marked") ? cell.textContent : "";
  });

  function isWordMarked(word) {
    const dirs = [
    [0, 1],   // →
    [1, 0],   // ↓
    [1, 1],   // ↘
    [-1, 1],  // ↗
    [1, -1],  // ↙
    [-1, -1]  // ↖
  ];
    for (let [dr, dc] of dirs) {
      for (let r = 0; r < 15; r++) {
        for (let c = 0; c < 15; c++) {
          let ok = true;
          for (let i = 0; i < word.length; i++) {
            const rr = r + dr * i;
            const cc = c + dc * i;
            if (rr < 0 || rr >= 15 || cc < 0 || cc >= 15 || gridMatrix[rr][cc] !== word[i]) {
              ok = false;
              break;
            }
          }
          if (ok) return true;
        }
      }
    }
    return false;
  }

  document.querySelectorAll("#word-list li").forEach(li => {
    const word = li.textContent;
    if (!li.classList.contains("found") && isWordMarked(word)) {
      li.classList.add("found");
      foundWords.add(word);
    }
  });

  checkCompletion();
}

document.querySelectorAll(".cell").forEach(cell => {
  cell.addEventListener("click", () => {
    checkMarkedWords();
  });
});
</script>
</body>
</html>

