<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Wordle - Op√©ra</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>üß© Devine le mot myst√®re</h2>
  <p>Un mot de 5 lettres... Peut-√™tre un lieu myst√©rieux de Paris ?</p>
  <div id="wordle-board" class="board"></div>
  <input type="text" id="wordle-input" placeholder="Tape ton mot ici..." />
  <br><button onclick="checkGuess()">Valider</button>
  <p id="wordle-feedback"></p>

  <script>
    const secret = "opera";
    const maxTries = 6;
    let tries = 0;

    document.getElementById("wordle-input").setAttribute("maxlength", secret.length);

    function createRow(guess) {
      const row = document.createElement("div");
      row.className = "row";
      const secretArr = secret.split('');
      const guessArr = guess.split('');
      const result = Array(secret.length).fill('absent');
      const secretUsed = Array(secret.length).fill(false);

      // Premi√®re passe : marquer les lettres correctes
      for (let i = 0; i < secret.length; i++) {
        if (guessArr[i] === secretArr[i]) {
          result[i] = 'correct';
          secretUsed[i] = true;
        }
      }

      // Deuxi√®me passe : marquer les lettres pr√©sentes mais mal plac√©es
      for (let i = 0; i < secret.length; i++) {
        if (result[i] !== 'correct') {
          for (let j = 0; j < secret.length; j++) {
            if (!secretUsed[j] && guessArr[i] === secretArr[j]) {
              result[i] = 'present';
              secretUsed[j] = true;
              break;
            }
          }
        }
      }

      for (let i = 0; i < secret.length; i++) {
        const letter = document.createElement("div");
        letter.className = "cell " + result[i];
        letter.textContent = guess[i] ? guess[i].toUpperCase() : "";
        row.appendChild(letter);
      }

      return row;
    }

    function checkGuess() {
      const input = document.getElementById("wordle-input");
      const guess = input.value.toLowerCase().trim();

      if (guess.length !== secret.length) {
        document.getElementById("wordle-feedback").textContent = "‚õî Le mot doit contenir exactement " + secret.length + " lettres.";
        return;
      }

      if (tries >= maxTries) return;

      const board = document.getElementById("wordle-board");
      board.appendChild(createRow(guess));
      tries++;

      if (guess === secret) {
        document.getElementById("wordle-feedback").textContent = "‚úÖ Bravo ! Tu as devin√© OPERA !";
        input.disabled = true;
      } else if (tries === maxTries) {
        document.getElementById("wordle-feedback").textContent = "‚ùå Tu as √©puis√© tes essais ! Le mot √©tait : " + secret.toUpperCase();
        input.disabled = true;
      } else {
        document.getElementById("wordle-feedback").textContent = "‚ùå Ce n‚Äôest pas le bon mot. R√©essaie !";
        input.value = "";
        input.focus();
      }
    }
  </script>
</body>
</html>
